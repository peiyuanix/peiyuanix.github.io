<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 8.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"blog.lpypl.top","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"disqus","storage":true,"lazyload":false,"nav":{"disqus":{"text":"Load Disqus","order":-1},"gitalk":{"order":-2}},"activeClass":"disqus"},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="刘沛源的博客">
<meta property="og:type" content="website">
<meta property="og:title" content="Yuan&#39;s blog">
<meta property="og:url" content="https://blog.lpypl.top/page/4/index.html">
<meta property="og:site_name" content="Yuan&#39;s blog">
<meta property="og:description" content="刘沛源的博客">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Liu Peiyuan">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://blog.lpypl.top/page/4/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>Yuan's blog</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-190455776-1"></script>
    <script>
      if (CONFIG.hostname === location.hostname) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-190455776-1');
      }
    </script>






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="Yuan's blog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Yuan's blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">刘沛源的博客</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-rss">

    <a href="/atom.xml" rel="section"><i class="fa fa-rss fa-fw"></i>RSS</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://blog.lpypl.top/2020/12/14/ResultSet%E5%88%9D%E6%8E%A2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://cdn.jsdelivr.net/gh/lpypl/picgo-repo/data/1639911209663.jpg">
      <meta itemprop="name" content="Liu Peiyuan">
      <meta itemprop="description" content="刘沛源的博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yuan's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/12/14/ResultSet%E5%88%9D%E6%8E%A2/" class="post-title-link" itemprop="url">ResultSet初探</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-12-14 14:00:00" itemprop="dateCreated datePublished" datetime="2020-12-14T14:00:00+08:00">2020-12-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-09-22 00:27:23" itemprop="dateModified" datetime="2025-09-22T00:27:23+08:00">2025-09-22</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2020/12/14/ResultSet%E5%88%9D%E6%8E%A2/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/12/14/ResultSet初探/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>1.5k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>3 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p><code>ResultSet</code> 是一个接口，具体操作由jdbc驱动实现，本文以MySQL Driver为例分析 <code>ResultSet</code> 的实现。</p>
<h2 id="实验"><a href="#实验" class="headerlink" title="实验"></a>实验</h2><p>测试 <code>executeQuery</code> 查询结果大于 <code>jvm</code> 内存时会发生什么。</p>
<h3 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h3><ol>
<li><p>创建数据库 <code>db_research</code></p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> database db_search;</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建表 <code>table0</code>, 具有两个字段 <code>name varchar(255)</code>, <code>file longblob</code></p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> table0(name <span class="type">varchar</span>(<span class="number">255</span>), file longblob);</span><br></pre></td></tr></table></figure>
</li>
<li><p>插入 <code>64</code> 条 <code>file</code> 大小为 <code>1024*1024 B = 1 MB</code> 的数据</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">pStat = conn.prepareStatement(<span class="string">&quot;insert into table0 values(?, ?);&quot;</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>; i&lt;<span class="number">64</span>; i++) &#123;</span><br><span class="line">    pStat.setString(<span class="number">1</span>, <span class="string">&quot;hello&quot;</span>);</span><br><span class="line">    pStat.setBinaryStream(<span class="number">2</span>, <span class="keyword">new</span> <span class="title class_">ByteArrayInputStream</span>(</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">String</span>(<span class="keyword">new</span> <span class="title class_">char</span>[<span class="number">1024</span>*<span class="number">1024</span>]).replace(<span class="string">&#x27;\0&#x27;</span>, <span class="string">&#x27;a&#x27;</span>).getBytes(StandardCharsets.UTF_8)));</span><br><span class="line">    pStat.addBatch();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> ret[] = pStat.executeBatch();</span><br><span class="line">pStat.close();</span><br></pre></td></tr></table></figure>
</li>
<li><p>从 <code>table0</code> 中取所有数据，在默认虚拟机参数下该操作会正常执行</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">pStat = conn.prepareStatement(<span class="string">&quot;select * from table0;&quot;</span>);</span><br><span class="line">    <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> pStat.executeQuery();</span><br><span class="line"><span class="keyword">while</span> (rs.next()) &#123;</span><br><span class="line">    System.out.println(rs.getString(<span class="string">&quot;name&quot;</span>));</span><br><span class="line">    System.out.println(rs.getBinaryStream(<span class="string">&quot;file&quot;</span>).read());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>限制 jvm 内存为 <code>16MB</code>，再次执行上面的 <code>select</code> 操作，则会由于内存不足而抛出错误，由此推测普通的查询操作试图将所有查询结果缓存到本地供用户使用</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Exception in thread <span class="string">&quot;main&quot;</span> java.sql.SQLException: Java heap space</span><br><span class="line">    at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:<span class="number">129</span>)</span><br><span class="line">    at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:<span class="number">97</span>)</span><br><span class="line">    at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:<span class="number">122</span>)</span><br><span class="line">    at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:<span class="number">953</span>)</span><br><span class="line">    at com.mysql.cj.jdbc.ClientPreparedStatement.executeQuery(ClientPreparedStatement.java:<span class="number">1003</span>)</span><br><span class="line">    at Main.main(Main.java:<span class="number">46</span>)</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="结论"><a href="#结论" class="headerlink" title="结论"></a>结论</h3><p>根据上面的测试推测，Mysql Driver试图缓存所有查询结果到本地供 <code>ResultSet</code> 使用（具体存放位置暂时不知道，反之是本地，占用当前进程的jvm空间），并没有在内存不足时采取一些措施来避免出错，经过查阅资料，得知可以采用流式查询来避免查询量过大时爆内存的问题  </p>
<pre><code><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">pStat = conn.prepareStatement(<span class="string">&quot;select * from table0;&quot;</span>, </span><br><span class="line">            ResultSet.TYPE_FORWARD_ONLY, ResultSet.CONCUR_READ_ONLY);</span><br><span class="line">    pStat.setFetchSize(Integer.MIN_VALUE);</span><br><span class="line">    <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> pStat.executeQuery();</span><br><span class="line">    <span class="keyword">while</span> (rs.next()) &#123;</span><br><span class="line">        System.out.println(rs.getString(<span class="string">&quot;name&quot;</span>));</span><br><span class="line">        System.out.println(rs.getBinaryStream(<span class="string">&quot;file&quot;</span>).read());</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
</code></pre><h2 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h2><p>经过查阅资料，得知 MySQL JDBC Driver 实际上有三种查询方式，普通查询，流式查询，基于游标的查询。下面的是最新源代码，参考链接中作者使用的是旧版源代码。</p>
<h3 id="普通查询和流式查询"><a href="#普通查询和流式查询" class="headerlink" title="普通查询和流式查询"></a>普通查询和流式查询</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">public</span> &lt;T <span class="keyword">extends</span> <span class="title class_">Resultset</span>&gt; T <span class="title function_">readAllResults</span><span class="params">(<span class="type">int</span> maxRows, <span class="type">boolean</span> streamResults, NativePacketPayload resultPacket, <span class="type">boolean</span> isBinaryEncoded,</span></span><br><span class="line"><span class="params">        ColumnDefinition metadata, ProtocolEntityFactory&lt;T, NativePacketPayload&gt; resultSetFactory)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"></span><br><span class="line">    resultPacket.setPosition(<span class="number">0</span>);</span><br><span class="line">    <span class="type">T</span> <span class="variable">topLevelResultSet</span> <span class="operator">=</span> read(Resultset.class, maxRows, streamResults, resultPacket, isBinaryEncoded, metadata, resultSetFactory);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.serverSession.hasMoreResults()) &#123;</span><br><span class="line">        <span class="type">T</span> <span class="variable">currentResultSet</span> <span class="operator">=</span> topLevelResultSet;</span><br><span class="line">        <span class="keyword">if</span> (streamResults) &#123;</span><br><span class="line">            currentResultSet = readNextResultset(currentResultSet, maxRows, <span class="literal">true</span>, isBinaryEncoded, resultSetFactory);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">while</span> (<span class="built_in">this</span>.serverSession.hasMoreResults()) &#123;</span><br><span class="line">                currentResultSet = readNextResultset(currentResultSet, maxRows, <span class="literal">false</span>, isBinaryEncoded, resultSetFactory);</span><br><span class="line">            &#125;</span><br><span class="line">            clearInputStream();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.hadWarnings) &#123;</span><br><span class="line">        scanForAndThrowDataTruncation();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    reclaimLargeReusablePacket();</span><br><span class="line">    <span class="keyword">return</span> topLevelResultSet;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="代码分析"><a href="#代码分析" class="headerlink" title="代码分析"></a>代码分析</h4><p>上面代码中，对分析流式查询和普通查询最关键的代码如下，大概可以判断出，代码的意思：</p>
<blockquote>
<p>若当前模式为流式查询，那么只读取（从哪里读暂不清楚）下一条存入 ResultSet；若为普通查询，则读取所有结果放入 ResultSet</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="built_in">this</span>.serverSession.hasMoreResults()) &#123;</span><br><span class="line">    <span class="type">T</span> <span class="variable">currentResultSet</span> <span class="operator">=</span> topLevelResultSet;</span><br><span class="line">    <span class="comment">// 流式查询，只读下一条，否则，将读取所有的结果</span></span><br><span class="line">    <span class="keyword">if</span> (streamResults) &#123;</span><br><span class="line">        currentResultSet = readNextResultset(currentResultSet, maxRows, <span class="literal">true</span>, isBinaryEncoded, resultSetFactory);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="built_in">this</span>.serverSession.hasMoreResults()) &#123;</span><br><span class="line">            currentResultSet = readNextResultset(currentResultSet, maxRows, <span class="literal">false</span>, isBinaryEncoded, resultSetFactory);</span><br><span class="line">        &#125;</span><br><span class="line">        clearInputStream();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="能否在MySQL连接关闭后继续使用-ResultSet"><a href="#能否在MySQL连接关闭后继续使用-ResultSet" class="headerlink" title="能否在MySQL连接关闭后继续使用 ResultSet"></a>能否在MySQL连接关闭后继续使用 <code>ResultSet</code></h4><p>下面的错误是我试图执行完 <code>executeQuery</code>之后关闭 <code>MySQL</code>服务来探究是否支持在连接断开后继续使用 <code>ResultSet</code> 的结果。</p>
<ol>
<li>结果显示使用流式查询时，若连接断开（关闭MySQL服务器），将不能再使用 <code>ResultSet</code></li>
<li>而使用普通查询时，在断开MySQL连接之后，依旧可以持续使用 <code>ResultSet</code></li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">Exception in thread <span class="string">&quot;main&quot;</span> java.sql.SQLException: Error retrieving record: Unexpected Exception: java.io.EOFException message given: Can not read response from server. Expected to read <span class="number">1</span>,048,<span class="number">586</span> bytes, read <span class="number">573</span>,<span class="number">436</span> bytes before connection was unexpectedly lost.</span><br><span class="line"></span><br><span class="line">Nested Stack Trace:</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">** BEGIN NESTED EXCEPTION ** </span><br><span class="line"></span><br><span class="line">java.io.EOFException</span><br><span class="line">MESSAGE: Can not read response from server. Expected to read <span class="number">1</span>,048,<span class="number">586</span> bytes, read <span class="number">573</span>,<span class="number">436</span> bytes before connection was unexpectedly lost.</span><br><span class="line"></span><br><span class="line">STACKTRACE:</span><br><span class="line"></span><br><span class="line">java.io.EOFException: Can not read response from server. Expected to read <span class="number">1</span>,048,<span class="number">586</span> bytes, read <span class="number">573</span>,<span class="number">436</span> bytes before connection was unexpectedly lost.</span><br><span class="line">	at com.mysql.cj.protocol.FullReadInputStream.readFully(FullReadInputStream.java:<span class="number">67</span>)</span><br><span class="line">	at com.mysql.cj.protocol.a.SimplePacketReader.readMessage(SimplePacketReader.java:<span class="number">108</span>)</span><br><span class="line">	at com.mysql.cj.protocol.a.SimplePacketReader.readMessage(SimplePacketReader.java:<span class="number">45</span>)</span><br><span class="line">	at com.mysql.cj.protocol.a.TimeTrackingPacketReader.readMessage(TimeTrackingPacketReader.java:<span class="number">57</span>)</span><br><span class="line">	at com.mysql.cj.protocol.a.TimeTrackingPacketReader.readMessage(TimeTrackingPacketReader.java:<span class="number">41</span>)</span><br><span class="line">	at com.mysql.cj.protocol.a.MultiPacketReader.readMessage(MultiPacketReader.java:<span class="number">61</span>)</span><br><span class="line">	at com.mysql.cj.protocol.a.MultiPacketReader.readMessage(MultiPacketReader.java:<span class="number">44</span>)</span><br><span class="line">	at com.mysql.cj.protocol.a.ResultsetRowReader.read(ResultsetRowReader.java:<span class="number">75</span>)</span><br><span class="line">	at com.mysql.cj.protocol.a.ResultsetRowReader.read(ResultsetRowReader.java:<span class="number">42</span>)</span><br><span class="line">	at com.mysql.cj.protocol.a.NativeProtocol.read(NativeProtocol.java:<span class="number">1583</span>)</span><br><span class="line">	at com.mysql.cj.protocol.a.result.ResultsetRowsStreaming.next(ResultsetRowsStreaming.java:<span class="number">193</span>)</span><br><span class="line">	at com.mysql.cj.protocol.a.result.ResultsetRowsStreaming.next(ResultsetRowsStreaming.java:<span class="number">62</span>)</span><br><span class="line">	at com.mysql.cj.jdbc.result.ResultSetImpl.next(ResultSetImpl.java:<span class="number">1738</span>)</span><br><span class="line">	at Main.main(Main.java:<span class="number">54</span>)</span><br><span class="line"></span><br><span class="line">** END NESTED EXCEPTION **</span><br><span class="line"></span><br><span class="line">	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:<span class="number">129</span>)</span><br><span class="line">	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:<span class="number">97</span>)</span><br><span class="line">	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:<span class="number">122</span>)</span><br><span class="line">	at com.mysql.cj.jdbc.result.ResultSetImpl.next(ResultSetImpl.java:<span class="number">1753</span>)</span><br><span class="line">	at Main.main(Main.java:<span class="number">54</span>)</span><br><span class="line">Disconnected from the target VM, address: <span class="string">&#x27;127.0.0.1:8753&#x27;</span>, transport: <span class="string">&#x27;socket&#x27;</span></span><br><span class="line"></span><br><span class="line">Process finished with exit code <span class="number">1</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="普通查询和流式查询的网络占用情况对比"><a href="#普通查询和流式查询的网络占用情况对比" class="headerlink" title="普通查询和流式查询的网络占用情况对比"></a>普通查询和流式查询的网络占用情况对比</h4><p>通过Wireshark抓包（<strong>npcap txdy，winpcap不支持localhost抓包</strong>），发现：</p>
<ol>
<li>流式传输时，会在每一次调用 <code>rs.next</code> 之后发生一次小规模的网络传输，推测可能是传输本次所需数据</li>
<li>普通查询时，只会在一开始调用 <code>execQuery</code> 时，发生一次超大规模的网络传输，推测可能是传输完所有所需数据</li>
</ol>
<h4 id="普通查询和流式查询的内存占用情况对比"><a href="#普通查询和流式查询的内存占用情况对比" class="headerlink" title="普通查询和流式查询的内存占用情况对比"></a>普通查询和流式查询的内存占用情况对比</h4><ol>
<li>使用普通查询时，若查询结果数据量较大，则程序对应的java进程内存占用量会明显增加</li>
<li>使用流式查询时，程序对应的java进程内存占用量与所读取的数据量没有明显关联</li>
</ol>
<h3 id="游标查询与另外两种的区别"><a href="#游标查询与另外两种的区别" class="headerlink" title="游标查询与另外两种的区别"></a>游标查询与另外两种的区别</h3><p>游标查询源码暂未分析，根据查询到的资料，结合上面的测试，三种查询的异同如下：</p>
<ol>
<li><strong>流式查询</strong> 和 <strong>普通查询</strong> 的区别发生在 <strong>客户端</strong>，服务端对这两种查询的反应都是一次查询出所有所需数据，然后试图全部发送给客户端。但是 <strong>流式查询</strong> 时，客户端在调用 <code>rs.next()</code> 才给服务端返回 <code>ack（TCP协议）</code> 以接收下一条数据，导致服务端不能一直发送数据，也就达到了 <strong>流式传输</strong> 的目的，而普通查询会在 <code>execQuery()</code> 时配合服务端接受所有的数据</li>
<li><strong>流式查询</strong> 和 <strong>游标查询</strong> 的区别发生在 <strong>服务端</strong>。服务端在流式传输中的行为上面已经说明；而服务端在游标查询中的行为是：按照 <code>fecthSize</code> 的指示查询出所需数目的数据并发送给客户端，这时客户端会直接接收 <code>fetchSize</code> 条数据（相比之下，<strong>流式查询</strong>时 <strong>客户端</strong> 一次从服务端接收一条），如果客户端需要更多数据，则会再次向服务端发送请求</li>
</ol>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p>[1] mysql-connector-java 8.0.22 源代码<br>[2] <a target="_blank" rel="noopener" href="https://www.jianshu.com/p/c7c5dbe63019">https://www.jianshu.com/p/c7c5dbe63019</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://blog.lpypl.top/2020/12/10/std%20sort%E8%B8%A9%E5%9D%91/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://cdn.jsdelivr.net/gh/lpypl/picgo-repo/data/1639911209663.jpg">
      <meta itemprop="name" content="Liu Peiyuan">
      <meta itemprop="description" content="刘沛源的博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yuan's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/12/10/std%20sort%E8%B8%A9%E5%9D%91/" class="post-title-link" itemprop="url">std sort踩坑</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-12-11 04:00:00" itemprop="dateCreated datePublished" datetime="2020-12-11T04:00:00+08:00">2020-12-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-09-22 00:27:23" itemprop="dateModified" datetime="2025-09-22T00:27:23+08:00">2025-09-22</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2020/12/10/std%20sort%E8%B8%A9%E5%9D%91/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/12/10/std sort踩坑/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>82</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>T135 会在下列输入时报错<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[1,2,3,5,4,3,2,1,4,3,2,1,3,2,1,1,2,3,4,4,3,2,1]</span><br></pre></td></tr></table></figure><br>可能跟sort内部实现有关，记得要使用 <code>&lt;=</code> 而不要用 <code>&gt;</code></p>
<h2 id="错误版本代码"><a href="#错误版本代码" class="headerlink" title="错误版本代码"></a>错误版本代码</h2><p>sort 里面使用 <code>&lt;=</code><br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">candy</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; ratings)</span> </span>&#123;</span><br><span class="line">        <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">index</span><span class="params">(ratings.size())</span></span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>; i&lt;index.<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line">            index[i] = i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">sort</span>(index.<span class="built_in">begin</span>(), index.<span class="built_in">end</span>(), [&amp;ratings](<span class="type">int</span> ind1, <span class="type">int</span> ind2) &#123;</span><br><span class="line">            <span class="keyword">return</span> ratings[ind1] &lt;= ratings[ind2];</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">candy</span><span class="params">(ratings.size())</span></span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> ind: index) &#123;</span><br><span class="line">            <span class="type">int</span> ct = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span>(ind<span class="number">-1</span> &gt;= <span class="number">0</span> &amp;&amp; ratings[ind] &gt; ratings[ind<span class="number">-1</span>]) &#123;</span><br><span class="line">                ct = <span class="built_in">max</span>(candy[ind<span class="number">-1</span>] + <span class="number">1</span>, ct);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(ind+<span class="number">1</span> &lt; ratings.<span class="built_in">size</span>() &amp;&amp; ratings[ind] &gt; ratings[ind+<span class="number">1</span>]) &#123;</span><br><span class="line">                ct = <span class="built_in">max</span>(candy[ind+<span class="number">1</span>] + <span class="number">1</span>, ct);</span><br><span class="line">            &#125;</span><br><span class="line">            candy[ind] = ct;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">accumulate</span>(candy.<span class="built_in">begin</span>(), candy.<span class="built_in">end</span>(), <span class="number">0</span>);</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h2 id="正确版本代码"><a href="#正确版本代码" class="headerlink" title="正确版本代码"></a>正确版本代码</h2><p>sort 里面使用 <code>&lt;</code><br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">candy</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; ratings)</span> </span>&#123;</span><br><span class="line">        <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">index</span><span class="params">(ratings.size())</span></span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>; i&lt;index.<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line">            index[i] = i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">sort</span>(index.<span class="built_in">begin</span>(), index.<span class="built_in">end</span>(), [&amp;ratings](<span class="type">int</span> ind1, <span class="type">int</span> ind2) &#123;</span><br><span class="line">            <span class="keyword">return</span> ratings[ind1] &lt; ratings[ind2];</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">candy</span><span class="params">(ratings.size())</span></span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> ind: index) &#123;</span><br><span class="line">            <span class="type">int</span> ct = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span>(ind<span class="number">-1</span> &gt;= <span class="number">0</span> &amp;&amp; ratings[ind] &gt; ratings[ind<span class="number">-1</span>]) &#123;</span><br><span class="line">                ct = <span class="built_in">max</span>(candy[ind<span class="number">-1</span>] + <span class="number">1</span>, ct);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(ind+<span class="number">1</span> &lt; ratings.<span class="built_in">size</span>() &amp;&amp; ratings[ind] &gt; ratings[ind+<span class="number">1</span>]) &#123;</span><br><span class="line">                ct = <span class="built_in">max</span>(candy[ind+<span class="number">1</span>] + <span class="number">1</span>, ct);</span><br><span class="line">            &#125;</span><br><span class="line">            candy[ind] = ct;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">accumulate</span>(candy.<span class="built_in">begin</span>(), candy.<span class="built_in">end</span>(), <span class="number">0</span>);</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://blog.lpypl.top/2020/12/10/SAT%20solver%E4%B8%8E%20SMT%20solver/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://cdn.jsdelivr.net/gh/lpypl/picgo-repo/data/1639911209663.jpg">
      <meta itemprop="name" content="Liu Peiyuan">
      <meta itemprop="description" content="刘沛源的博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yuan's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/12/10/SAT%20solver%E4%B8%8E%20SMT%20solver/" class="post-title-link" itemprop="url">SAT solver与SMT solver</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-12-11 00:00:00" itemprop="dateCreated datePublished" datetime="2020-12-11T00:00:00+08:00">2020-12-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-09-22 00:27:23" itemprop="dateModified" datetime="2025-09-22T00:27:23+08:00">2025-09-22</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2020/12/10/SAT%20solver%E4%B8%8E%20SMT%20solver/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/12/10/SAT solver与 SMT solver/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>749</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="SAT-solver"><a href="#SAT-solver" class="headerlink" title="SAT solver"></a>SAT solver</h2><h4 id="SAT"><a href="#SAT" class="headerlink" title="SAT"></a>SAT</h4><p>布尔可满足性问题（Boolean satisfiability problem），指是否存在一组解可以使一个布尔公式结果为True，此问题是NPC问题。现有算法可以有效解决涉及数万个变量和数百万子句的问题的能力。</p>
<h4 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h4><ol>
<li>完备算法：DPLL, CDCL, LA  </li>
<li>不完备算法：SLS, MP, EA  </li>
<li>混合求解  </li>
<li>并行求解<h4 id="SAT-Solver"><a href="#SAT-Solver" class="headerlink" title="SAT Solver"></a>SAT Solver</h4>是可用布尔公式（合取范式）描述的的一类问题的求解器。 <h4 id="求解方法"><a href="#求解方法" class="headerlink" title="求解方法"></a>求解方法</h4>将问题转换为合取范式，代入求解器即可。<h4 id="应用方向"><a href="#应用方向" class="headerlink" title="应用方向"></a>应用方向</h4></li>
<li>电路可满足问题：验证是否存在一组input，使得output为true  </li>
<li>电路形式等效检查：验证两个电路等效  <h4 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h4>比如若要求解使析取范式 $(\neg A \vee B) \wedge (C \vee D)$ 为 True的所有结果<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">import pycosat</span><br><span class="line"></span><br><span class="line"># 用数字标识一个变量</span><br><span class="line"># (not a or b) and (c or d)</span><br><span class="line">for solution in list(pycosat.itersolve([(-1, 2), (3, 4)])):</span><br><span class="line">  print(solution)</span><br></pre></td></tr></table></figure>
输出如下<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[-1, 2, 3, 4]</span><br><span class="line">[-1, 2, 3, -4]</span><br><span class="line">[-1, 2, -3, 4]</span><br><span class="line">[-1, -2, -3, 4]</span><br><span class="line">[-1, -2, 3, 4]</span><br><span class="line">[-1, -2, 3, -4]</span><br><span class="line">[1, 2, 3, 4]</span><br><span class="line">[1, 2, 3, -4]</span><br><span class="line">[1, 2, -3, 4]</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="SMT-solver"><a href="#SMT-solver" class="headerlink" title="SMT solver"></a>SMT solver</h2><h3 id="SMT-solver-1"><a href="#SMT-solver-1" class="headerlink" title="SMT solver"></a>SMT solver</h3><p>是SAT的扩展，使用一阶逻辑描述问题, 变量类型不再限于布尔变量，还可以是常量、函数、谓词等</p>
<h3 id="应用方向-1"><a href="#应用方向-1" class="headerlink" title="应用方向"></a>应用方向</h3><ol>
<li>软件包依赖检查</li>
<li>数独问题</li>
<li>八皇后</li>
<li>算术表达式满足性检查<h3 id="应用方向示例"><a href="#应用方向示例" class="headerlink" title="应用方向示例"></a>应用方向示例</h3>可以进行变量约束问题求解<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">from z3 import Int, Solver</span><br><span class="line">x = Int(&#x27;x&#x27;)</span><br><span class="line">y = Int(&#x27;y&#x27;)</span><br><span class="line"></span><br><span class="line">s = Solver()</span><br><span class="line">print(s)</span><br><span class="line"></span><br><span class="line">s.add(x &gt; 10, y == x + 2)</span><br><span class="line">print(s)</span><br><span class="line">print(&quot;Solving constraints in the solver s ...&quot;)</span><br><span class="line">print(s.check())</span><br><span class="line"></span><br><span class="line">print(&quot;Create a new scope...&quot;)</span><br><span class="line">s.push()</span><br><span class="line">s.add(y &lt; 11)</span><br><span class="line">print(s)</span><br><span class="line">print(&quot;Solving updated set of constraints...&quot;)</span><br><span class="line">print(s.check())</span><br><span class="line"></span><br><span class="line">print(&quot;Restoring state...&quot;)</span><br><span class="line">s.pop()</span><br><span class="line">print(s)</span><br><span class="line">print(&quot;Solving restored set of constraints...&quot;)</span><br><span class="line">print(s.check())</span><br></pre></td></tr></table></figure>
结果如下<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[]</span><br><span class="line">[x &gt; 10, y == x + 2]</span><br><span class="line">Solving constraints in the solver s ...</span><br><span class="line">sat</span><br><span class="line">Create a new scope...</span><br><span class="line">[x &gt; 10, y == x + 2, y &lt; 11]</span><br><span class="line">Solving updated set of constraints...</span><br><span class="line">unsat</span><br><span class="line">Restoring state...</span><br><span class="line">[x &gt; 10, y == x + 2]</span><br><span class="line">Solving restored set of constraints...</span><br><span class="line">sat</span><br></pre></td></tr></table></figure>
<h3 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h3>[1] <a target="_blank" rel="noopener" href="https://rhettinger.github.io/overview.html">https://rhettinger.github.io/overview.html</a><br>[2] <a target="_blank" rel="noopener" href="https://resources.mpi-inf.mpg.de/departments/rg1/conferences/vtsa08/slides/barret2_smt.pdf">https://resources.mpi-inf.mpg.de/departments/rg1/conferences/vtsa08/slides/barret2_smt.pdf</a><br>[3] <a target="_blank" rel="noopener" href="http://www.jsjkx.com/CN/article/openArticlePDF.jsp?id=16156">http://www.jsjkx.com/CN/article/openArticlePDF.jsp?id=16156</a><br>[4] <a target="_blank" rel="noopener" href="https://pysathq.github.io/docs/pysat.pdf">https://pysathq.github.io/docs/pysat.pdf</a><br>[5] <a target="_blank" rel="noopener" href="https://ericpony.github.io/z3py-tutorial/guide-examples.htm">https://ericpony.github.io/z3py-tutorial/guide-examples.htm</a></li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://blog.lpypl.top/2020/10/04/%E5%86%92%E6%B3%A1%E6%8E%92%E5%BA%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://cdn.jsdelivr.net/gh/lpypl/picgo-repo/data/1639911209663.jpg">
      <meta itemprop="name" content="Liu Peiyuan">
      <meta itemprop="description" content="刘沛源的博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yuan's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/10/04/%E5%86%92%E6%B3%A1%E6%8E%92%E5%BA%8F/" class="post-title-link" itemprop="url">冒泡排序</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-10-05 04:00:00" itemprop="dateCreated datePublished" datetime="2020-10-05T04:00:00+08:00">2020-10-05</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-09-22 00:27:23" itemprop="dateModified" datetime="2025-09-22T00:27:23+08:00">2025-09-22</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2020/10/04/%E5%86%92%E6%B3%A1%E6%8E%92%E5%BA%8F/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/10/04/冒泡排序/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>384</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="冒泡排序代码"><a href="#冒泡排序代码" class="headerlink" title="冒泡排序代码"></a>冒泡排序代码</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stddef.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">bubble_sort</span><span class="params">(<span class="type">int</span> *arr, <span class="type">size_t</span> arrsiz)</span></span><br><span class="line">&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> ind = <span class="number">0</span>; ind &lt; (<span class="type">int</span>)(arrsiz) - <span class="number">1</span>; ind++) &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> jnd = (<span class="type">int</span>)(arrsiz) - <span class="number">1</span>; jnd &gt; ind; jnd--) &#123;</span><br><span class="line">                        <span class="keyword">if</span> (arr[jnd] &lt; arr[jnd - <span class="number">1</span>]) &#123;</span><br><span class="line">                                <span class="type">int</span> tmp = arr[jnd];</span><br><span class="line">                                arr[jnd] = arr[jnd - <span class="number">1</span>];</span><br><span class="line">                                arr[jnd - <span class="number">1</span>] = tmp;</span><br><span class="line">                        &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;\r\033[k&quot;</span>);</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;Progress: %d / %ld&quot;</span>, ind, arrsiz);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\r\033[k&quot;</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;                                                                                                               &quot;</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\r\033[k&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="效率测试框架"><a href="#效率测试框架" class="headerlink" title="效率测试框架"></a>效率测试框架</h2><p>与 <code>插入排序</code> 类似</p>
<h2 id="测试结果"><a href="#测试结果" class="headerlink" title="测试结果"></a>测试结果</h2><p><font color="green">比插入和简单选择慢</font></p>
<pre><code>&gt;&gt;&gt; BUBBLE SORT &gt;&gt;&gt;
[SORT array_size=10]
        gen_time: 0
                ORIGION ARRAY: [ 3, 6, 7, 5, 3, 5, 6, 2, 9, 1]
        sort_time: 0
                SORTED ARRAY: [ 1, 2, 3, 3, 5, 5, 6, 6, 7, 9]
[SORT array_size=100]
        gen_time: 0
        sort_time: 0
[SORT array_size=10000]
        gen_time: 0
        sort_time: 1
[SORT array_size=100000]
        gen_time: 0
        sort_time: 31
[SORT array_size=1000000]
        gen_time: 0
        sort_time: 3037
&lt;&lt;&lt; BUBBLE SORT &lt;&lt;&lt;
</code></pre>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://blog.lpypl.top/2020/10/01/%E5%BD%92%E5%B9%B6%E6%8E%92%E5%BA%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://cdn.jsdelivr.net/gh/lpypl/picgo-repo/data/1639911209663.jpg">
      <meta itemprop="name" content="Liu Peiyuan">
      <meta itemprop="description" content="刘沛源的博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yuan's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/10/01/%E5%BD%92%E5%B9%B6%E6%8E%92%E5%BA%8F/" class="post-title-link" itemprop="url">归并排序</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-10-01 17:58:00" itemprop="dateCreated datePublished" datetime="2020-10-01T17:58:00+08:00">2020-10-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-09-22 00:27:23" itemprop="dateModified" datetime="2025-09-22T00:27:23+08:00">2025-09-22</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2020/10/01/%E5%BD%92%E5%B9%B6%E6%8E%92%E5%BA%8F/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/10/01/归并排序/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>390</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="归并排序代码"><a href="#归并排序代码" class="headerlink" title="归并排序代码"></a>归并排序代码</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// divide_merge.c</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stddef.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;limits.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">merge</span><span class="params">(<span class="type">int</span> *arr, <span class="type">size_t</span> p, <span class="type">size_t</span> q, <span class="type">size_t</span> r)</span> </span><br><span class="line">&#123;</span><br><span class="line">        <span class="type">size_t</span> n1 = q - p + <span class="number">1</span>;</span><br><span class="line">        <span class="type">size_t</span> n2 = r - q;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> arr_left[n1+<span class="number">1</span>], arr_right[n2+<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> ind = <span class="number">0</span>; ind &lt; n1; ind++) &#123;</span><br><span class="line">                arr_left[ind] = arr[p + ind];</span><br><span class="line">        &#125; </span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> ind = <span class="number">0</span>; ind &lt; n2; ind++) &#123;</span><br><span class="line">                arr_right[ind] = arr[q + <span class="number">1</span> + ind];</span><br><span class="line">        &#125; </span><br><span class="line">        <span class="comment">// sentinel</span></span><br><span class="line">        arr_left[n1] = arr_right[n2] = INT_MAX;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> ind = <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> jnd = <span class="number">0</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> knd = p; knd &lt;= r; knd++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (arr_left[ind] &lt;= arr_right[jnd]) &#123;</span><br><span class="line">                        arr[knd] = arr_left[ind];</span><br><span class="line">                        ++ind;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        arr[knd] = arr_right[jnd];</span><br><span class="line">                        ++jnd;</span><br><span class="line">                &#125;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">merge_sort</span><span class="params">(<span class="type">int</span> *arr, <span class="type">int</span> head, <span class="type">int</span> tail)</span></span><br><span class="line">&#123;</span><br><span class="line">        <span class="keyword">if</span> (head &lt; tail) &#123;</span><br><span class="line">                <span class="type">int</span> mid = (head + tail) / <span class="number">2</span>;</span><br><span class="line">                merge_sort(arr, head, mid);</span><br><span class="line">                merge_sort(arr, mid + <span class="number">1</span>, tail);</span><br><span class="line">                merge(arr, head, mid, tail);</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">divide_merge_sort</span><span class="params">(<span class="type">int</span> *arr, <span class="type">size_t</span> arrsiz)</span></span><br><span class="line">&#123;</span><br><span class="line">        merge_sort(arr, <span class="number">0</span>, (<span class="type">int</span>)arrsiz - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="效率测试框架"><a href="#效率测试框架" class="headerlink" title="效率测试框架"></a>效率测试框架</h2><p>与 <code>插入排序</code> 类似</p>
<h2 id="测试结果"><a href="#测试结果" class="headerlink" title="测试结果"></a>测试结果</h2><p><font color="green">直接起飞！！！</font></p>
<pre><code>&gt;&gt;&gt; DEVIDE-MERGE SORT &gt;&gt;&gt;
[SORT array_size=10]
    gen_time: 0
        ORIGION ARRAY: [ 3, 6, 7, 5, 3, 5, 6, 2, 9, 1]
    sort_time: 0
        SORTED ARRAY: [ 1, 2, 3, 3, 5, 5, 6, 6, 7, 9]
[SORT array_size=100]
    gen_time: 0
    sort_time: 0
[SORT array_size=10000]
    gen_time: 0
    sort_time: 0
[SORT array_size=100000]
    gen_time: 0
    sort_time: 0
[SORT array_size=1000000]
    gen_time: 0
    sort_time: 0
&lt;&lt;&lt; DEVIDE-MERGE SORT &lt;&lt;&lt;
</code></pre>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://blog.lpypl.top/2020/10/01/%E7%AE%80%E5%8D%95%E9%80%89%E6%8B%A9%E6%8E%92%E5%BA%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://cdn.jsdelivr.net/gh/lpypl/picgo-repo/data/1639911209663.jpg">
      <meta itemprop="name" content="Liu Peiyuan">
      <meta itemprop="description" content="刘沛源的博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yuan's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/10/01/%E7%AE%80%E5%8D%95%E9%80%89%E6%8B%A9%E6%8E%92%E5%BA%8F/" class="post-title-link" itemprop="url">简单选择排序</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-10-01 15:33:00" itemprop="dateCreated datePublished" datetime="2020-10-01T15:33:00+08:00">2020-10-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-09-22 00:27:23" itemprop="dateModified" datetime="2025-09-22T00:27:23+08:00">2025-09-22</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2020/10/01/%E7%AE%80%E5%8D%95%E9%80%89%E6%8B%A9%E6%8E%92%E5%BA%8F/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/10/01/简单选择排序/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>348</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="简单选择排序代码"><a href="#简单选择排序代码" class="headerlink" title="简单选择排序代码"></a>简单选择排序代码</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// primeselect.c</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stddef.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">primeselect_sort</span><span class="params">(<span class="type">int</span> *arr, <span class="type">size_t</span> arrsiz)</span></span><br><span class="line">&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>); <span class="comment">// 避免同一行刷新排序进度时覆盖其他程序输出</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> ind = <span class="number">0</span>; ind &lt; arrsiz; ind++) &#123;</span><br><span class="line">                <span class="type">int</span> max_ind = ind;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> jnd = ind + <span class="number">1</span>; jnd &lt; arrsiz; jnd++) &#123;</span><br><span class="line">                        <span class="keyword">if</span> (arr[jnd] &gt; arr[max_ind]) &#123;</span><br><span class="line">                               max_ind = jnd;</span><br><span class="line">                        &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="type">int</span> swap_val = arr[max_ind];</span><br><span class="line">                arr[max_ind] = arr[ind];</span><br><span class="line">                arr[ind] = swap_val;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;\r\033[k&quot;</span>);</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;Progress: %d / %ld&quot;</span>, ind, arrsiz);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\r\033[k&quot;</span>); <span class="comment">// 同一行刷新排序进度</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;                                                                                                               &quot;</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\r\033[k&quot;</span>); <span class="comment">// 清空刷新内容，避免干扰后续输出</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="效率测试框架"><a href="#效率测试框架" class="headerlink" title="效率测试框架"></a>效率测试框架</h2><p>与 <code>插入排序</code> 类似</p>
<h2 id="测试结果"><a href="#测试结果" class="headerlink" title="测试结果"></a>测试结果</h2><pre><code>&gt;&gt;&gt; PRIEM SELECT SORT &gt;&gt;&gt;
[SORT array_size=10]
        gen_time: 0
                ORIGION ARRAY: [ 3, 6, 7, 5, 3, 5, 6, 2, 9, 1]
        sort_time: 0
                SORTED ARRAY: [ 9, 7, 6, 6, 5, 5, 3, 3, 2, 1]
[SORT array_size=100]
        gen_time: 0
        sort_time: 0
[SORT array_size=10000]
        gen_time: 0
        sort_time: 0
[SORT array_size=100000]
        gen_time: 0
        sort_time: 13
[SORT array_size=1000000]
        gen_time: 0
        sort_time: 1354
</code></pre>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://blog.lpypl.top/2020/09/30/%E6%8F%92%E5%85%A5%E6%8E%92%E5%BA%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://cdn.jsdelivr.net/gh/lpypl/picgo-repo/data/1639911209663.jpg">
      <meta itemprop="name" content="Liu Peiyuan">
      <meta itemprop="description" content="刘沛源的博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yuan's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/09/30/%E6%8F%92%E5%85%A5%E6%8E%92%E5%BA%8F/" class="post-title-link" itemprop="url">插入排序</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-09-30 15:33:00" itemprop="dateCreated datePublished" datetime="2020-09-30T15:33:00+08:00">2020-09-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-09-22 00:27:23" itemprop="dateModified" datetime="2025-09-22T00:27:23+08:00">2025-09-22</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2020/09/30/%E6%8F%92%E5%85%A5%E6%8E%92%E5%BA%8F/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/09/30/插入排序/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>335</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="插入排序代码"><a href="#插入排序代码" class="headerlink" title="插入排序代码"></a>插入排序代码</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// insertion.c</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stddef.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">insertion_sort</span><span class="params">(<span class="type">int</span> *arr, <span class="type">size_t</span> arrsiz)</span></span><br><span class="line">&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>); <span class="comment">// 避免同一行刷新排序进度时覆盖其他程序输出</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> target_index=<span class="number">0</span>; target_index &lt; arrsiz; target_index++)</span><br><span class="line">        &#123;</span><br><span class="line">                <span class="type">int</span> target_value = arr[target_index];</span><br><span class="line">                <span class="type">int</span> compare_index = target_index - <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">while</span>(compare_index &gt;= <span class="number">0</span> &amp;&amp; target_value &lt; arr[compare_index])</span><br><span class="line">                &#123;</span><br><span class="line">                        arr[compare_index + <span class="number">1</span>] = arr[compare_index];</span><br><span class="line">                        --compare_index;</span><br><span class="line">                &#125;</span><br><span class="line">                arr[compare_index + <span class="number">1</span>] = target_value;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;\r\033[k&quot;</span>);</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;Progress: %d / %ld&quot;</span>, target_index, arrsiz);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\r\033[k&quot;</span>); <span class="comment">// 同一行刷新排序进度</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;                                                                                                               &quot;</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\r\033[k&quot;</span>); <span class="comment">// 清空刷新内容，避免干扰后续输出</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="效率测试框架"><a href="#效率测试框架" class="headerlink" title="效率测试框架"></a>效率测试框架</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// sort.c</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;time.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">sort</span><span class="params">(<span class="type">void</span> (*func)(<span class="type">int</span>*, <span class="type">size_t</span>))</span></span><br><span class="line">&#123;</span><br><span class="line">        <span class="type">const</span> <span class="type">size_t</span> lens[<span class="number">5</span>] = &#123;<span class="number">10</span>, <span class="number">100</span>, <span class="number">10000</span>, <span class="number">100000</span>, <span class="number">1000000</span>&#125;;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">size_t</span> ind = <span class="number">0</span>; ind &lt; <span class="number">5</span>; ind++) &#123;</span><br><span class="line">                <span class="type">int</span> arr[lens[ind]];</span><br><span class="line">                srand(<span class="number">0</span>);</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;[SORT array_size=%lu]\n&quot;</span>, lens[ind]);</span><br><span class="line">                <span class="type">time_t</span> gen_start_time, gen_end_time, sort_start_time, sort_end_time;</span><br><span class="line">                gen_start_time = time(<span class="literal">NULL</span>);</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">size_t</span> jnd = <span class="number">0</span>; jnd &lt; lens[ind]; jnd++)</span><br><span class="line">                &#123;</span><br><span class="line">                        arr[jnd] = rand() % lens[ind];</span><br><span class="line">                &#125;</span><br><span class="line">                gen_end_time = time(<span class="literal">NULL</span>);</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;\tgen_time: %ld\n&quot;</span>, gen_end_time - gen_start_time);</span><br><span class="line"></span><br><span class="line">                <span class="comment">// output the first origin array to ensure the alg is correct</span></span><br><span class="line">                <span class="keyword">if</span>(ind == <span class="number">0</span>) &#123;</span><br><span class="line">                        <span class="built_in">printf</span>(<span class="string">&quot;\t\tORIGION ARRAY: [&quot;</span>);</span><br><span class="line">                        <span class="keyword">for</span> (<span class="type">size_t</span> jnd = <span class="number">0</span>; jnd &lt; lens[ind]; jnd++)</span><br><span class="line">                        &#123;</span><br><span class="line">                                <span class="built_in">printf</span>(<span class="string">&quot; %d,&quot;</span>, arr[jnd]);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="built_in">printf</span>(<span class="string">&quot;\b]\n&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                sort_start_time = time(<span class="literal">NULL</span>);</span><br><span class="line">                func(arr, lens[ind]);</span><br><span class="line">                sort_end_time = time(<span class="literal">NULL</span>);</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;\tsort_time: %ld\n&quot;</span>, sort_end_time - sort_start_time);</span><br><span class="line"></span><br><span class="line">                <span class="comment">// output the first sorted array to ensure the alg is correct</span></span><br><span class="line">                <span class="keyword">if</span>(ind == <span class="number">0</span>) &#123;</span><br><span class="line">                        <span class="built_in">printf</span>(<span class="string">&quot;\t\tSORTED ARRAY: [&quot;</span>);</span><br><span class="line">                        <span class="keyword">for</span> (<span class="type">size_t</span> jnd = <span class="number">0</span>; jnd &lt; lens[ind]; jnd++)</span><br><span class="line">                        &#123;</span><br><span class="line">                                <span class="built_in">printf</span>(<span class="string">&quot; %d,&quot;</span>, arr[jnd]);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="built_in">printf</span>(<span class="string">&quot;\b]\n&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// sort_test.c</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stddef.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">insertion_sort</span><span class="params">(<span class="type">int</span> *arr, <span class="type">size_t</span> arrsiz)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">sort</span><span class="params">(<span class="type">void</span> (*func)(<span class="type">int</span>*, <span class="type">size_t</span>))</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;&gt;&gt;&gt; INSERTION SORT &gt;&gt;&gt;\n&quot;</span>);</span><br><span class="line">        sort(&amp;insertion_sort); </span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;&gt;&gt;&gt; INSERTION SORT &gt;&gt;&gt;\n&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="测试结果"><a href="#测试结果" class="headerlink" title="测试结果"></a>测试结果</h2><pre><code>&gt;&gt;&gt; INSERTION SORT &gt;&gt;&gt;
[SORT array_size=10]
    gen_time: 0
        ORIGION ARRAY: [ 3, 6, 7, 5, 3, 5, 6, 2, 9, 1]
    sort_time: 0                                                              
        SORTED ARRAY: [ 1, 2, 3, 3, 5, 5, 6, 6, 7, 9]

[SORT array_size=100]
    gen_time: 0
    sort_time: 0                                                                               

[SORT array_size=10000]
    gen_time: 0
    sort_time: 0                                                                         

[SORT array_size=100000]
    gen_time: 0
    sort_time: 7                                                                         

[SORT array_size=1000000]
    gen_time: 0
    sort_time: 750
</code></pre>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://blog.lpypl.top/2020/09/21/HP%E6%9A%97%E5%BD%B1%E7%B2%BE%E7%81%B53%E5%BC%80%E5%90%AFWake-on-Lan/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://cdn.jsdelivr.net/gh/lpypl/picgo-repo/data/1639911209663.jpg">
      <meta itemprop="name" content="Liu Peiyuan">
      <meta itemprop="description" content="刘沛源的博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yuan's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/09/21/HP%E6%9A%97%E5%BD%B1%E7%B2%BE%E7%81%B53%E5%BC%80%E5%90%AFWake-on-Lan/" class="post-title-link" itemprop="url">HP暗影精灵3开启Wake-on-Lan</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-09-21 12:33:00" itemprop="dateCreated datePublished" datetime="2020-09-21T12:33:00+08:00">2020-09-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-09-22 00:27:23" itemprop="dateModified" datetime="2025-09-22T00:27:23+08:00">2025-09-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Tutorial/" itemprop="url" rel="index"><span itemprop="name">Tutorial</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2020/09/21/HP%E6%9A%97%E5%BD%B1%E7%B2%BE%E7%81%B53%E5%BC%80%E5%90%AFWake-on-Lan/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/09/21/HP暗影精灵3开启Wake-on-Lan/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>1.8k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>3 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="HP-PCs-Wake-On-LAN-Does-Not-Work-After-Windows-10-Upgrade-is-Performed"><a href="#HP-PCs-Wake-On-LAN-Does-Not-Work-After-Windows-10-Upgrade-is-Performed" class="headerlink" title="HP PCs - Wake On LAN Does Not Work After Windows 10 Upgrade is Performed"></a>HP PCs - Wake On LAN Does Not Work After Windows 10 Upgrade is Performed</h1><p><strong>This document pertains to HP and Compaq computers with Windows 10.</strong></p>
<p>The Wake On LAN (WOL) stops working after upgrading to Windows 10 or after the Windows 10 updates are installed. Windows 8 registry key enables Wake On LAN support under Classic Shutdown mode, but not under Hybrid Shutdown mode. After the operating system is upgraded to Windows 10, the registry key is not carried over, so the WOL function may not work after the upgrade is performed.</p>
<p>To enable the Wake On LAN (WOL) function after upgrading to Windows 10 or installing the Windows 10 update, perform the following the steps:</p>
<h2 id="Step-1-Update-the-BIOS"><a href="#Step-1-Update-the-BIOS" class="headerlink" title="Step 1: Update the BIOS"></a>Step 1: Update the BIOS</h2><p>Verify the computer has the latest BIOS version installed. Refer to the following links to locate, download and install the appropriate BIOS update for your computer:</p>
<ul>
<li><p><strong>Consumer computers:</strong> Go to <a target="_blank" rel="noopener" href="http://support.hp.com/us-en/drivers">HP Customer Support - Software and Driver Downloads</a>.</p>
</li>
<li><p><strong>Business computers:</strong> Go to <a target="_blank" rel="noopener" href="https://support.hp.com/in-en/document/c02860501">Using HP SoftPaq Download Manager</a>.</p>
</li>
</ul>
<h2 id="Step-2-Disable-Hybrid-Shutdown-mode"><a href="#Step-2-Disable-Hybrid-Shutdown-mode" class="headerlink" title="Step 2: Disable Hybrid Shutdown mode"></a>Step 2: Disable Hybrid Shutdown mode</h2><ol>
<li><p>Open Control Panel and select <strong>Hardware and Sound</strong>.</p>
</li>
<li><p>Select <strong>Power Options</strong>.</p>
</li>
<li><p>Click <strong>Require a password on wakeup</strong>.</p>
</li>
<li><p>Confirm the option of <strong>Turn on fast startup</strong> is unchecked.</p>
</li>
<li><p>Save changes.</p>
</li>
</ol>
<h2 id="Step-3-Enable-Wake-On-LAN-WOL-setting-for-LAN-driver"><a href="#Step-3-Enable-Wake-On-LAN-WOL-setting-for-LAN-driver" class="headerlink" title="Step 3: Enable Wake On LAN (WOL) setting for LAN driver"></a>Step 3: Enable Wake On LAN (WOL) setting for LAN driver</h2><ol>
<li><p>Open <strong>Device Manager</strong>.</p>
</li>
<li><p>Select <strong>Network adapters</strong>.</p>
</li>
<li><p>Locate the LAN device and click on it.</p>
</li>
<li><p>Select the A<strong>dvanced </strong>tab.</p>
</li>
<li><p>Confirm <strong>Shutdown Wake-On-Lan</strong> is enabled.</p>
</li>
<li><p>Select the <strong>Power Management</strong> tab.</p>
</li>
<li><p>Check the option <strong>Allow this device to wake the computer</strong>.</p>
</li>
<li><p>Save changes.</p>
</li>
<li><p>Close <strong>Device Manager</strong>.</p>
</li>
</ol>
<h2 id="Step-4-Manually-add-the-HP-registry-key"><a href="#Step-4-Manually-add-the-HP-registry-key" class="headerlink" title="Step 4: Manually add the HP registry key"></a>Step 4: Manually add the HP registry key</h2><blockquote>
<p>   CAUTION: </p>
<p>If you use Registry Editor incorrectly, you may cause serious problems that may require you to reinstall your operating system. HP cannot guarantee that you can solve problems that result from using Registry Editor incorrectly. <strong>Use Registry Editor at your own risk</strong>.</p>
</blockquote>
<ol>
<li><p>Press <strong>Win + x</strong>, select <strong>Run</strong> and type <strong>regedit</strong> in the run line.</p>
</li>
<li><p>Select <strong>OK</strong> to launch the <strong>Registry Editor</strong>.</p>
</li>
<li><p>Navigate<br>to <strong>KEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\NDIS\Parameters</strong>.</p>
</li>
<li><p>Right click on <strong>Parameters</strong>.</p>
</li>
<li><p>Select <strong>New DWORD (32-bit) Value</strong>.</p>
</li>
<li><p>Add the key <strong>AllowWakeFromS5</strong>.</p>
</li>
<li><p>Set the value to <strong>1</strong>.</p>
</li>
<li><p>Close the <strong>Registry Editor</strong>.</p>
</li>
<li><p>Restart the computer.</p>
</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://blog.lpypl.top/2020/09/14/%E4%BD%BF%E7%94%A8Vmware%E5%AE%89%E8%A3%85Openwrt%E8%BF%9B%E8%A1%8C%E5%A4%9A%E6%8B%A8%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://cdn.jsdelivr.net/gh/lpypl/picgo-repo/data/1639911209663.jpg">
      <meta itemprop="name" content="Liu Peiyuan">
      <meta itemprop="description" content="刘沛源的博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yuan's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/09/14/%E4%BD%BF%E7%94%A8Vmware%E5%AE%89%E8%A3%85Openwrt%E8%BF%9B%E8%A1%8C%E5%A4%9A%E6%8B%A8%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%95/" class="post-title-link" itemprop="url">使用Vmware安装Openwrt进行多拨问题记录</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-09-14 15:54:00" itemprop="dateCreated datePublished" datetime="2020-09-14T15:54:00+08:00">2020-09-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-09-22 00:27:23" itemprop="dateModified" datetime="2025-09-22T00:27:23+08:00">2025-09-22</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2020/09/14/%E4%BD%BF%E7%94%A8Vmware%E5%AE%89%E8%A3%85Openwrt%E8%BF%9B%E8%A1%8C%E5%A4%9A%E6%8B%A8%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%95/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/09/14/使用Vmware安装Openwrt进行多拨问题记录/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>135</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="网络连接方式"><a href="#网络连接方式" class="headerlink" title="网络连接方式"></a>网络连接方式</h1><p>Openwrt虚拟机通过多个桥接接口多拨，主机连接Openwrt的Lan进行联网，主机和虚拟机Lan的连接方式为Host-Only。<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[LAN]&lt;-----&gt;[eth0]&lt;------&gt;[HOST-VMware Virtual Ethernet Adapter for VMnet1]&lt;-----&gt;[USER]</span><br><span class="line">  |</span><br><span class="line">  |     /[VWAN1]---&gt;[eth1]-----\</span><br><span class="line">  |    /[VWAN2]----&gt;[eth2]------\</span><br><span class="line">[WAN] (..........................)--&gt;[Host-Realtek_Gaming_GBE_Family_Controller]---&gt;[ISP]</span><br><span class="line">       \[VWAN3]----&gt;[ethX]------/</span><br><span class="line">        \[VWAN4]---&gt;[ethY]-----/</span><br></pre></td></tr></table></figure></p>
<h1 id="多个网络接口同时连接无法联网"><a href="#多个网络接口同时连接无法联网" class="headerlink" title="多个网络接口同时连接无法联网"></a>多个网络接口同时连接无法联网</h1><p>我的原因是路由表中存在多项默认路由，删除多余默认路由，只保留到Openwrt虚拟机的默认路由即可。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://blog.lpypl.top/2020/09/13/Openwrt%E5%8D%95%E7%BA%BF%E5%A4%9A%E6%8B%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://cdn.jsdelivr.net/gh/lpypl/picgo-repo/data/1639911209663.jpg">
      <meta itemprop="name" content="Liu Peiyuan">
      <meta itemprop="description" content="刘沛源的博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yuan's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/09/13/Openwrt%E5%8D%95%E7%BA%BF%E5%A4%9A%E6%8B%A8/" class="post-title-link" itemprop="url">Openwrt单线多拨</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-09-13 14:54:00" itemprop="dateCreated datePublished" datetime="2020-09-13T14:54:00+08:00">2020-09-13</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-09-22 00:27:23" itemprop="dateModified" datetime="2025-09-22T00:27:23+08:00">2025-09-22</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2020/09/13/Openwrt%E5%8D%95%E7%BA%BF%E5%A4%9A%E6%8B%A8/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/09/13/Openwrt单线多拨/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>734</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="安装mwan和macvlan"><a href="#安装mwan和macvlan" class="headerlink" title="安装mwan和macvlan"></a>安装mwan和macvlan</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">opkg update</span><br><span class="line">opkg install kmod-macvlan mwan3 luci-app-mwan3</span><br></pre></td></tr></table></figure>
<h1 id="测试多拨"><a href="#测试多拨" class="headerlink" title="测试多拨"></a>测试多拨</h1><h2 id="创建虚拟网卡"><a href="#创建虚拟网卡" class="headerlink" title="创建虚拟网卡"></a>创建虚拟网卡</h2><p>使用macvlan创建虚拟网卡，其中接口名称需要根据实际情况调整，此处我使用 <code>eth0</code>，并且可以创建多个虚拟接口多次拨号，此处演示双拨，创建好之后使用 <code>ifconfig</code> 命令便可以看到</p>
<h3 id="方法一"><a href="#方法一" class="headerlink" title="方法一"></a>方法一</h3><p>这种方法重启会失效，需要写入启动脚本中<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ip link add link eth0 name veth01 type macvlan</span><br><span class="line">ifconfig veth01 up</span><br></pre></td></tr></table></figure></p>
<h3 id="方法二"><a href="#方法二" class="headerlink" title="方法二"></a>方法二</h3><p>写入 <code>/etc/config/network</code><br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">config device &#x27;veth01&#x27;</span><br><span class="line">    option name &#x27;veth01&#x27;</span><br><span class="line">    option ifname &#x27;eth0&#x27;</span><br><span class="line">    option type &#x27;macvlan&#x27;</span><br></pre></td></tr></table></figure></p>
<h2 id="创建虚拟WAN"><a href="#创建虚拟WAN" class="headerlink" title="创建虚拟WAN"></a>创建虚拟WAN</h2><p>写入 <code>/etc/config/network</code>，此处需要注意每一个wan（包括原本的wan和创建的虚拟wan）都需要设置metric（跃点数），而且需要各不相同<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">config interface &#x27;vwan1&#x27;</span><br><span class="line">	option ifname &#x27;veth01&#x27;</span><br><span class="line">	option proto &#x27;pppoe&#x27;</span><br><span class="line">	option password &#x27;******&#x27;</span><br><span class="line">	option ipv6 &#x27;auto&#x27;</span><br><span class="line">	option metric &#x27;5&#x27;</span><br><span class="line">	option username &#x27;*************&#x27;</span><br></pre></td></tr></table></figure></p>
<h2 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h2><p>设置好之后就可以看是否各个接口都能获取到IP，如果可以，那就是支持多播，可以继续操作，否则就没必要继续看了，我的可以获取，结果是这样的<img src="https://i.loli.net/2020/09/13/y5TaKW9JNB87j3v.png" alt=""></p>
<h2 id="修改防火墙"><a href="#修改防火墙" class="headerlink" title="修改防火墙"></a>修改防火墙</h2><p>在 <code>网络-防火墙-区域</code> 中修改wan，覆盖网络中勾选vwan1。在接口中关闭wan，尝试是否能够正常上网。</p>
<h1 id="负载均衡"><a href="#负载均衡" class="headerlink" title="负载均衡"></a>负载均衡</h1><p>需要设置四项内容：接口、成员、策略、规则</p>
<h2 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h2><p>在luci界面的 <code>网络-&gt;负载均衡-&gt;接口</code> 中添加接口，如果有默认的，全部删掉</p>
<h3 id="添加"><a href="#添加" class="headerlink" title="添加"></a>添加</h3><p>输入接口名称，点击添加<br><img src="https://i.loli.net/2020/09/13/zukCeOjAXMd1U8v.png" alt=""></p>
<h3 id="设置设置追踪的域名或IP"><a href="#设置设置追踪的域名或IP" class="headerlink" title="设置设置追踪的域名或IP"></a>设置设置追踪的域名或IP</h3><p>点击添加之后，仅需 <code>设置追踪的域名或IP</code>，可以使用 <code>8.8.4.4</code>，也可以设置我所使用的这四个<br><img src="https://i.loli.net/2020/09/13/AC37fpoLEZsr2WT.png" alt=""></p>
<h2 id="成员"><a href="#成员" class="headerlink" title="成员"></a>成员</h2><p>在 <code>网络-&gt;负载均衡-&gt;成员</code> 中输入 <code>member_wan</code>，点击添加，并选好接口，跃点数保持默认。按照相同的步骤添加其他虚拟接口。<br><img src="https://i.loli.net/2020/09/13/FU2HdsOT4tPC6hn.png" alt=""></p>
<h2 id="策略"><a href="#策略" class="headerlink" title="策略"></a>策略</h2><p>添加一个名为load_balance的策略，成员选择上一步创建的几个成员。<br><img src="https://i.loli.net/2020/09/13/qofZ7Qtx1jH5wbv.png" alt=""></p>
<h2 id="规则"><a href="#规则" class="headerlink" title="规则"></a>规则</h2><p>添加一条名为default的规则，通讯协议选all，策略选择上一步创建的策略即可</p>
<h1 id="结束"><a href="#结束" class="headerlink" title="结束"></a>结束</h1><p>以上参考了以下几篇文章:</p>
<p><a target="_blank" rel="noopener" href="https://acris.me/2017/06/25/Load-balancing-multiple-PPPoE-on-LEDE/">LEDE/OpenWrt使用macvlan和mwan3实现单线多拨</a></p>
<p><a target="_blank" rel="noopener" href="https://igloo302.github.io/2020/openwrt%E4%BD%BF%E7%94%A8macvlan-mwan3%E5%AE%9E%E7%8E%B0%E5%8D%95%E7%BA%BF%E5%A4%9A%E6%8B%A8/">OpenWrt使用macvlan+mwan3实现单线多拨</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/3/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/5/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Liu Peiyuan"
      src="https://cdn.jsdelivr.net/gh/lpypl/picgo-repo/data/1639911209663.jpg">
  <p class="site-author-name" itemprop="name">Liu Peiyuan</p>
  <div class="site-description" itemprop="description">刘沛源的博客</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">46</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">14</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/lpypl" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;lpypl" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:lpy.henu@gmail.com" title="E-Mail → mailto:lpy.henu@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://t.me/lpypl" title="Telegram → https:&#x2F;&#x2F;t.me&#x2F;lpypl" rel="noopener" target="_blank"><i class="fab fa-telegram fa-fw"></i></a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Liu Peiyuan</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
      <span class="post-meta-item-text">站点总字数：</span>
    <span title="站点总字数">67k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span class="post-meta-item-text">站点阅读时长 &asymp;</span>
    <span title="站点阅读时长">2:02</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

  

<script>
  function loadCount() {
    var d = document, s = d.createElement('script');
    s.src = 'https://lpypl.disqus.com/count.js';
    s.id = 'dsq-count-scr';
    (d.head || d.body).appendChild(s);
  }
  // defer loading until the whole page loading is completed
  window.addEventListener('load', loadCount, false);
</script>

</body>
</html>
